<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meyers Automotive - Premium Auto's & Diensten</title>
    <meta name="description" content="Meyers Automotive - Specialist in in- en verkoop van premium auto's. Vestigingen in Heemskerk en Amsterdam. APK, onderhoud, export en meer.">
    <style>
        body {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #0B0B0B;
            color: #FFFFFF;
            line-height: 1.6;
        }

        /* Header & Navigation */
        header {
            background-color: #0B0B0B;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid #2C2C2C;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFFFFF;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #FFFFFF;
            text-decoration: none;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: #E10600;
        }

        .contact-info {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
        }

        /* Main Content */
        main {
            margin-top: 80px;
        }

        .page {
            display: none;
            min-height: calc(100vh - 80px);
            padding: 2rem 0;
        }

        .page.active {
            display: block;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(11, 11, 11, 0.7), rgba(11, 11, 11, 0.7)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%232C2C2C" width="1200" height="600"/><path fill="%23B0B0B0" d="M200 300 Q400 200 600 300 T1000 300 L1000 400 Q800 350 600 400 T200 400 Z"/></svg>');
            background-size: cover;
            background-position: center;
            height: 70vh;
            display: flex;
            align-items: center;
            text-align: center;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #B0B0B0;
        }

        .cta-button {
            background-color: #E10600;
            color: #FFFFFF;
            padding: 1rem 2rem;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover {
            background-color: #B8050A;
            transform: translateY(-2px);
        }

        /* Car Grid */
        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .car-card {
            background-color: #2C2C2C;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #B0B0B0;
            cursor: pointer;
        }

        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(225, 6, 0, 0.3);
        }

        .car-image {
            width: 100%;
            height: 200px;
            background-color: #B0B0B0;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .car-image.placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #2C2C2C;
        }

        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            border: none;
            color: #FFFFFF;
            font-size: 1.2rem;
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .favorite-btn.active {
            color: #E10600;
        }

        .car-content {
            padding: 1.5rem;
        }

        .car-title {
            color: #FFFFFF;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .car-details {
            color: #B0B0B0;
            margin-bottom: 1rem;
        }

        .car-details li {
            list-style: none;
            margin-bottom: 0.3rem;
            position: relative;
            padding-left: 1rem;
        }

        .car-details li:before {
            content: "•";
            color: #E10600;
            position: absolute;
            left: 0;
        }

        .car-price {
            color: #E10600;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        /* Filters */
        .filters {
            background-color: #2C2C2C;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            color: #B0B0B0;
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 0.5rem;
            border: 1px solid #B0B0B0;
            border-radius: 5px;
            background-color: #0B0B0B;
            color: #FFFFFF;
        }

        /* Car Detail Page */
        .car-detail {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .car-gallery {
            margin-bottom: 2rem;
        }

        .main-image {
            width: 100%;
            height: 400px;
            background-color: #B0B0B0;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .thumbnail-gallery {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
        }

        .thumbnail {
            width: 100px;
            height: 80px;
            background-color: #B0B0B0;
            background-size: cover;
            background-position: center;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }

        .thumbnail.active {
            border-color: #E10600;
        }

        .car-info {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .car-specs {
            background-color: #2C2C2C;
            padding: 2rem;
            border-radius: 10px;
        }

        .spec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #B0B0B0;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .share-btn {
            background-color: #E10600;
            color: #FFFFFF;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .share-btn:hover {
            background-color: #B8050A;
        }

        /* License Plate Lookup */
        .license-lookup {
            background-color: #2C2C2C;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .lookup-form {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            align-items: end;
        }

        .lookup-input {
            flex: 1;
        }

        .lookup-input input {
            width: 100%;
            padding: 1rem;
            border: 1px solid #B0B0B0;
            border-radius: 5px;
            background-color: #0B0B0B;
            color: #FFFFFF;
            font-size: 1.1rem;
            text-transform: uppercase;
        }

        .lookup-result {
            background-color: #0B0B0B;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #B0B0B0;
            display: none;
        }

        .lookup-result.show {
            display: block;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #2C2C2C;
        }

        /* Footer */
        footer {
            background-color: #0B0B0B;
            border-top: 1px solid #2C2C2C;
            padding: 3rem 0 1rem;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: #E10600;
            margin-bottom: 1rem;
        }

        .footer-section p,
        .footer-section a {
            color: #B0B0B0;
            text-decoration: none;
            margin-bottom: 0.5rem;
            display: block;
        }

        .footer-section a:hover {
            color: #E10600;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #2C2C2C;
            color: #B0B0B0;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #B0B0B0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .contact-info {
                display: none;
            }

            .car-info {
                grid-template-columns: 1fr;
            }

            .lookup-form {
                flex-direction: column;
            }
        }

        /* Fade in animation */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Back button */
        .back-btn {
            background-color: #2C2C2C;
            color: #FFFFFF;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 2rem;
            transition: background-color 0.3s ease;
        }

        .back-btn:hover {
            background-color: #B0B0B0;
            color: #0B0B0B;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" onclick="showPage('home')">Meyers Automotive</div>
            <ul class="nav-links">
                <li><a onclick="showPage('home')">Home</a></li>
                <li><a onclick="showPage('cars')">Auto's</a></li>
                <li><a onclick="showPage('lookup')">Kentekenzoeker</a></li>
                <li><a onclick="showPage('contact')">Contact</a></li>
            </ul>
            <div class="contact-info">
                <span>📞 +31 6 14435050</span>
                <span>📧 meyersautomotives@gmail.com</span>
            </div>
        </nav>
    </header>

    <main>
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>Meyers Automotive – Premium Auto's & Diensten</h1>
                        <p>Specialist in in- en verkoop van kwaliteitsvoertuigen. Vestigingen in Heemskerk en Amsterdam.</p>
                        <button class="cta-button" onclick="showPage('cars')">Bekijk Voorraad</button>
                    </div>
                </div>
            </div>
            
            <div class="container">
                <h2 style="text-align: center; margin: 3rem 0 2rem; font-size: 2.5rem;">Uitgelichte Auto's</h2>
                <div id="featured-cars" class="car-grid">
                    <div class="loading">Auto's worden geladen...</div>
                </div>
            </div>
        </div>

        <!-- Cars Overview Page -->
        <div id="cars" class="page">
            <div class="container">
                <h1 style="margin-bottom: 2rem; font-size: 2.5rem;">Onze Voorraad</h1>
                
                <div class="filters">
                    <div class="filter-group">
                        <label for="search">Zoeken</label>
                        <input type="text" id="search" placeholder="Merk, model..." onkeyup="filterCars()">
                    </div>
                    <div class="filter-group">
                        <label for="brand-filter">Merk</label>
                        <select id="brand-filter" onchange="filterCars()">
                            <option value="">Alle merken</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="fuel-filter">Brandstof</label>
                        <select id="fuel-filter" onchange="filterCars()">
                            <option value="">Alle</option>
                            <option value="Benzine">Benzine</option>
                            <option value="Diesel">Diesel</option>
                            <option value="Hybride">Hybride</option>
                            <option value="Elektrisch">Elektrisch</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="year-filter">Bouwjaar vanaf</label>
                        <select id="year-filter" onchange="filterCars()">
                            <option value="">Alle</option>
                            <option value="2020">2020</option>
                            <option value="2018">2018</option>
                            <option value="2015">2015</option>
                            <option value="2010">2010</option>
                        </select>
                    </div>
                    <button class="cta-button" onclick="resetFilters()">Reset Filters</button>
                </div>
                
                <div id="all-cars" class="car-grid">
                    <div class="loading">Auto's worden geladen...</div>
                </div>
            </div>
        </div>

        <!-- Car Detail Page -->
        <div id="car-detail" class="page">
            <div class="container">
                <button class="back-btn" onclick="showPage('cars')">← Terug naar overzicht</button>
                <div id="car-detail-content">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- License Plate Lookup Page -->
        <div id="lookup" class="page">
            <div class="container">
                <h1 style="margin-bottom: 2rem; font-size: 2.5rem;">Kentekenzoeker</h1>
                
                <div class="license-lookup">
                    <h3 style="color: #E10600; margin-bottom: 1rem;">Voer een kenteken in</h3>
                    <div class="lookup-form">
                        <div class="lookup-input">
                            <label for="license-input" style="color: #B0B0B0; display: block; margin-bottom: 0.5rem;">Kenteken</label>
                            <input type="text" id="license-input" placeholder="XX-XX-XX" maxlength="8">
                        </div>
                        <button class="cta-button" onclick="lookupLicense()">Zoeken</button>
                    </div>
                    
                    <div id="lookup-result" class="lookup-result">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Page -->
        <div id="contact" class="page">
            <div class="container">
                <h1 style="margin-bottom: 2rem; font-size: 2.5rem;">Contact</h1>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div style="background-color: #2C2C2C; padding: 2rem; border-radius: 10px; border: 1px solid #B0B0B0;">
                        <h3 style="color: #E10600; margin-bottom: 1rem;">Vestiging Heemskerk</h3>
                        <p><strong>📍 Adres:</strong><br>Kerkweg 152<br>1968KL Heemskerk</p>
                        <p><strong>📞 Telefoon:</strong><br>+31 6 14435050</p>
                        <p><strong>🕒 Openingstijden:</strong><br>Ma-Za: 09:00 – 18:00<br>Zo: 10:00 – 16:00</p>
                    </div>
                    
                    <div style="background-color: #2C2C2C; padding: 2rem; border-radius: 10px; border: 1px solid #B0B0B0;">
                        <h3 style="color: #E10600; margin-bottom: 1rem;">Vestiging Amsterdam</h3>
                        <p><strong>📍 Adres:</strong><br>Ibisweg 3-5<br>1033RA Amsterdam</p>
                        <p><strong>📞 Telefoon:</strong><br>+31 6 14435050</p>
                        <p><strong>🕒 Openingstijden:</strong><br>Ma-Za: 09:00 – 18:00<br>Zo: 10:00 – 16:00</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Meyers Automotive</h3>
                    <p><strong>KvK:</strong> 84030712 (Eenmanszaak)</p>
                    <p>Specialist in premium auto's</p>
                    <p>In- en verkoop • Export • Onderhoud</p>
                </div>
                
                <div class="footer-section">
                    <h3>Vestigingen</h3>
                    <p><strong>Heemskerk</strong><br>Kerkweg 152, 1968KL Heemskerk</p>
                    <p><strong>Amsterdam</strong><br>Ibisweg 3-5, 1033RA Amsterdam</p>
                </div>
                
                <div class="footer-section">
                    <h3>Contact</h3>
                    <a href="tel:+31614435050">📞 +31 6 14435050</a>
                    <a href="mailto:meyersautomotives@gmail.com">📧 meyersautomotives@gmail.com</a>
                    <p><strong>24/7 Noodlijn beschikbaar</strong></p>
                </div>
                
                <div class="footer-section">
                    <h3>Openingstijden</h3>
                    <p><strong>Maandag - Zaterdag</strong><br>09:00 - 18:00</p>
                    <p><strong>Zondag</strong><br>10:00 - 16:00</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Meyers Automotive. Alle rechten voorbehouden.</p>
                <p>Grote voorraad beschikbaar - Niet alles online gepubliceerd</p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vToVqUqC3z-fZPfOZwMZzr1Ed0Hmzu9fgYVG4wvs80YGS5fXD07gmaZi-kLlxGpc4qj3NPmxR46vdaJ/pub?output=csv";
        let allCars = [];
        let filteredCars = [];
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

        // Load cars from Google Sheet
        async function loadCars() {
            try {
                const response = await fetch(sheetUrl);
                const csvText = await response.text();
                const rows = csvText.split("\n").slice(1).filter(row => row.trim());
                
                allCars = rows.map((row, index) => {
                    const columns = parseCSVRow(row);
                    return {
                        id: index,
                        kenteken: columns[0] || '',
                        merk: columns[1] || '',
                        model: columns[2] || '',
                        type: columns[3] || '',
                        bouwjaar: columns[4] || '',
                        kilometerstand: columns[5] || '',
                        brandstof: columns[6] || '',
                        vermogen: columns[7] || '',
                        waarde: columns[8] || '',
                        origineleWaarde: columns[9] || '',
                        prijs: columns[10] || '',
                        locatie: columns[11] || '',
                        afbeelding1: columns[12] || '',
                        afbeelding2: columns[13] || '',
                        afbeelding3: columns[14] || '',
                        beschrijving: columns[15] || '',
                        favoriet: columns[16] === "true",
                        winst: columns[17] || '',
                        beschikbaar: columns[18] !== "false"
                    };
                }).filter(car => car.beschikbaar);
                
                filteredCars = [...allCars];
                displayCars();
                populateFilters();
            } catch (error) {
                console.error('Error loading cars:', error);
                loadSampleData();
            }
        }

        // Parse CSV row handling commas in quotes
        function parseCSVRow(row) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < row.length; i++) {
                const char = row[i];
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }
            result.push(current.trim());
            return result;
        }

        // Sample data fallback
        function loadSampleData() {
            allCars = [
                {
                    id: 0,
                    kenteken: "12-ABC-3",
                    merk: "BMW",
                    model: "320i",
                    type: "Sedan",
                    bouwjaar: "2020",
                    kilometerstand: "45000",
                    brandstof: "Benzine",
                    vermogen: "184",
                    waarde: "€30,000",
                    origineleWaarde: "€45,000",
                    prijs: "€32,500",
                    locatie: "Heemskerk",
                    afbeelding1: "",
                    afbeelding2: "",
                    afbeelding3: "",
                    beschrijving: "Prachtige BMW 320i in uitstekende staat. Volledig onderhouden en direct rijklaar.",
                    favoriet: false,
                    winst: "€2,500",
                    beschikbaar: true
                },
                {
                    id: 1,
                    kenteken: "45-DEF-6",
                    merk: "Mercedes-Benz",
                    model: "C200",
                    type: "Sedan",
                    bouwjaar: "2019",
                    kilometerstand: "38000",
                    brandstof: "Benzine",
                    vermogen: "184",
                    waarde: "€33,000",
                    origineleWaarde: "€48,000",
                    prijs: "€35,900",
                    locatie: "Amsterdam",
                    afbeelding1: "",
                    afbeelding2: "",
                    afbeelding3: "",
                    beschrijving: "Luxe Mercedes-Benz C200 met premium uitrusting. Zeer goed onderhouden.",
                    favoriet: true,
                    winst: "€2,900",
                    beschikbaar: true
                },
                {
                    id: 2,
                    kenteken: "78-GHI-9",
                    merk: "Audi",
                    model: "A4",
                    type: "Avant",
                    bouwjaar: "2021",
                    kilometerstand: "25000",
                    brandstof: "Diesel",
                    vermogen: "190",
                    waarde: "€36,000",
                    origineleWaarde: "€52,000",
                    prijs: "€38,500",
                    locatie: "Heemskerk",
                    afbeelding1: "",
                    afbeelding2: "",
                    afbeelding3: "",
                    beschrijving: "Sportieve Audi A4 Avant met quattro aandrijving. Ideaal voor gezinnen.",
                    favoriet: false,
                    winst: "€2,500",
                    beschikbaar: true
                }
            ];
            
            filteredCars = [...allCars];
            displayCars();
            populateFilters();
        }

        // Display cars
        function displayCars() {
            displayCarGrid('featured-cars', allCars.slice(0, 6));
            displayCarGrid('all-cars', filteredCars);
        }

        // Create car grid HTML
        function displayCarGrid(containerId, cars) {
            const container = document.getElementById(containerId);
            
            if (cars.length === 0) {
                container.innerHTML = '<div class="loading">Geen auto\'s gevonden</div>';
                return;
            }
            
            container.innerHTML = cars.map(car => `
                <div class="car-card fade-in" onclick="showCarDetail(${car.id})">
                    <div class="car-image ${car.afbeelding1 ? '' : 'placeholder'}" 
                         ${car.afbeelding1 ? `style="background-image: url('${car.afbeelding1}')"` : ''}>
                        ${!car.afbeelding1 ? '🚗' : ''}
                        <button class="favorite-btn ${favorites.includes(car.id) ? 'active' : ''}" 
                                onclick="event.stopPropagation(); toggleFavorite(${car.id})">
                            ${favorites.includes(car.id) ? '❤️' : '🤍'}
                        </button>
                    </div>
                    <div class="car-content">
                        <h3 class="car-title">${car.merk} ${car.model}</h3>
                        <ul class="car-details">
                            <li>Bouwjaar: ${car.bouwjaar}</li>
                            <li>Brandstof: ${car.brandstof}</li>
                            <li>Kilometerstand: ${car.kilometerstand} km</li>
                            <li>Vermogen: ${car.vermogen} pk</li>
                            <li>Locatie: ${car.locatie}</li>
                        </ul>
                        <div class="car-price">${car.prijs}</div>
                        <button class="cta-button" onclick="event.stopPropagation(); showCarDetail(${car.id})">
                            Meer Info
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Trigger fade-in animation
            setTimeout(() => {
                container.querySelectorAll('.fade-in').forEach((el, index) => {
                    setTimeout(() => {
                        el.classList.add('visible');
                    }, index * 100);
                });
            }, 100);
        }

        // Show car detail page
        function showCarDetail(carId) {
            const car = allCars.find(c => c.id === carId);
            if (!car) return;

            const images = [car.afbeelding1, car.afbeelding2, car.afbeelding3].filter(img => img);
            const mainImage = images[0] || '';

            document.getElementById('car-detail-content').innerHTML = `
                <div class="car-detail">
                    <h1 style="margin-bottom: 2rem; font-size: 2.5rem;">${car.merk} ${car.model} ${car.type}</h1>
                    
                    <div class="car-gallery">
                        <div class="main-image ${mainImage ? '' : 'placeholder'}" 
                             id="main-image" 
                             ${mainImage ? `style="background-image: url('${mainImage}')"` : ''}>
                            ${!mainImage ? '🚗' : ''}
                        </div>
                        ${images.length > 1 ? `
                            <div class="thumbnail-gallery">
                                ${images.map((img, index) => `
                                    <div class="thumbnail ${index === 0 ? 'active' : ''}" 
                                         style="background-image: url('${img}')"
                                         onclick="changeMainImage('${img}', this)">
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>

                    <div class="car-info">
                        <div class="car-specs">
                            <h3 style="color: #E10600; margin-bottom: 1rem;">Specificaties</h3>
                            <div class="spec-grid">
                                <div class="spec-item">
                                    <span>Kenteken:</span>
                                    <span>${car.kenteken}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Merk:</span>
                                    <span>${car.merk}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Model:</span>
                                    <span>${car.model}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Type:</span>
                                    <span>${car.type}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Bouwjaar:</span>
                                    <span>${car.bouwjaar}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Kilometerstand:</span>
                                    <span>${car.kilometerstand} km</span>
                                </div>
                                <div class="spec-item">
                                    <span>Brandstof:</span>
                                    <span>${car.brandstof}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Vermogen:</span>
                                    <span>${car.vermogen} pk</span>
                                </div>
                                <div class="spec-item">
                                    <span>Marktwaarde:</span>
                                    <span>${car.waarde}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Originele waarde:</span>
                                    <span>${car.origineleWaarde}</span>
                                </div>
                                <div class="spec-item">
                                    <span>Locatie:</span>
                                    <span>${car.locatie}</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div style="background-color: #2C2C2C; padding: 2rem; border-radius: 10px; margin-bottom: 1rem;">
                                <div class="car-price" style="font-size: 2rem; margin-bottom: 1rem;">${car.prijs}</div>
                                <button class="favorite-btn ${favorites.includes(car.id) ? 'active' : ''}" 
                                        onclick="toggleFavorite(${car.id})"
                                        style="position: static; margin-bottom: 1rem; padding: 1rem; font-size: 1rem;">
                                    ${favorites.includes(car.id) ? '❤️ Favoriet' : '🤍 Toevoegen aan favorieten'}
                                </button>
                                <button class="cta-button" style="width: 100%; margin-bottom: 1rem;" 
                                        onclick="contactAboutCar('${car.merk} ${car.model}')">
                                    Contact opnemen
                                </button>
                            </div>

                            <div style="background-color: #2C2C2C; padding: 1.5rem; border-radius: 10px;">
                                <h4 style="color: #E10600; margin-bottom: 1rem;">Delen</h4>
                                <div class="share-buttons">
                                    <button class="share-btn" onclick="shareOnFacebook('${car.merk} ${car.model}')">Facebook</button>
                                    <button class="share-btn" onclick="shareOnTwitter('${car.merk} ${car.model}')">Twitter</button>
                                    <button class="share-btn" onclick="shareOnWhatsApp('${car.merk} ${car.model}')">WhatsApp</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    ${car.beschrijving ? `
                        <div style="background-color: #2C2C2C; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
                            <h3 style="color: #E10600; margin-bottom: 1rem;">Beschrijving</h3>
                            <p>${car.beschrijving}</p>
                        </div>
                    ` : ''}

                    <div>
                        <h3 style="color: #E10600; margin-bottom: 2rem;">Andere interessante auto's</h3>
                        <div class="car-grid">
                            ${allCars.filter(c => c.id !== car.id).slice(0, 3).map(otherCar => `
                                <div class="car-card" onclick="showCarDetail(${otherCar.id})">
                                    <div class="car-image ${otherCar.afbeelding1 ? '' : 'placeholder'}" 
                                         ${otherCar.afbeelding1 ? `style="background-image: url('${otherCar.afbeelding1}')"` : ''}>
                                        ${!otherCar.afbeelding1 ? '🚗' : ''}
                                    </div>
                                    <div class="car-content">
                                        <h3 class="car-title">${otherCar.merk} ${otherCar.model}</h3>
                                        <div class="car-price">${otherCar.prijs}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;

            showPage('car-detail');
        }

        // Change main image in gallery
        function changeMainImage(imageSrc, thumbnail) {
            document.getElementById('main-image').style.backgroundImage = `url('${imageSrc}')`;
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        // Toggle favorite
        function toggleFavorite(carId) {
            const index = favorites.indexOf(carId);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(carId);
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            
            // Update UI
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(carId)) {
                    btn.classList.toggle('active', favorites.includes(carId));
                    btn.innerHTML = favorites.includes(carId) ? '❤️' : '🤍';
                }
            });
        }

        // Share functions
        function shareOnFacebook(carName) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Bekijk deze ${carName} bij Meyers Automotive`);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        }

        function shareOnTwitter(carName) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Bekijk deze ${carName} bij Meyers Automotive`);
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
        }

        function shareOnWhatsApp(carName) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`Bekijk deze ${carName} bij Meyers Automotive: ${window.location.href}`);
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        // Contact about car
        function contactAboutCar(carName) {
            showPage('contact');
            // In a real implementation, you could pre-fill a contact form here
        }

        // Populate filter dropdowns
        function populateFilters() {
            const brandFilter = document.getElementById('brand-filter');
            const brands = [...new Set(allCars.map(car => car.merk))].sort();
            
            brandFilter.innerHTML = '<option value="">Alle merken</option>' + 
                brands.map(brand => `<option value="${brand}">${brand}</option>`).join('');
        }

        // Filter cars
        function filterCars() {
            const search = document.getElementById('search').value.toLowerCase();
            const brand = document.getElementById('brand-filter').value;
            const fuel = document.getElementById('fuel-filter').value;
            const year = document.getElementById('year-filter').value;
            
            filteredCars = allCars.filter(car => {
                const matchesSearch = !search || 
                    car.merk.toLowerCase().includes(search) || 
                    car.model.toLowerCase().includes(search);
                const matchesBrand = !brand || car.merk === brand;
                const matchesFuel = !fuel || car.brandstof === fuel;
                const matchesYear = !year || parseInt(car.bouwjaar) >= parseInt(year);
                
                return matchesSearch && matchesBrand && matchesFuel && matchesYear;
            });
            
            displayCarGrid('all-cars', filteredCars);
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('search').value = '';
            document.getElementById('brand-filter').value = '';
            document.getElementById('fuel-filter').value = '';
            document.getElementById('year-filter').value = '';
            filteredCars = [...allCars];
            displayCarGrid('all-cars', filteredCars);
        }

        // License plate lookup
        async function lookupLicense() {
            const license = document.getElementById('license-input').value.toUpperCase().replace(/-/g, '');
            const resultDiv = document.getElementById('lookup-result');
            
            if (!license) {
                alert('Voer een kenteken in');
                return;
            }

            resultDiv.innerHTML = '<div class="loading">Kenteken wordt opgezocht...</div>';
            resultDiv.classList.add('show');

            try {
                const response = await fetch(`https://opendata.rdw.nl/resource/m9d7-ebf2.json?kenteken=${license}`);
                const data = await response.json();

                if (data.length === 0) {
                    resultDiv.innerHTML = `
                        <div style="text-align: center; color: #E10600;">
                            <h3>Geen resultaten gevonden</h3>
                            <p>Het kenteken "${license}" is niet gevonden in de RDW database.</p>
                        </div>
                    `;
                    return;
                }

                const vehicle = data[0];
                resultDiv.innerHTML = `
                    <h3 style="color: #E10600; margin-bottom: 1rem;">Voertuiggegevens</h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <span><strong>Kenteken:</strong></span>
                            <span>${vehicle.kenteken || 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Merk:</strong></span>
                            <span>${vehicle.merk || 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Handelsbenaming:</strong></span>
                            <span>${vehicle.handelsbenaming || 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Voertuigsoort:</strong></span>
                            <span>${vehicle.voertuigsoort || 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Gewicht ledig:</strong></span>
                            <span>${vehicle.massa_ledig_voertuig || 'Onbekend'} kg</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Max. massa:</strong></span>
                            <span>${vehicle.toegestane_maximum_massa_voertuig || 'Onbekend'} kg</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Brandstof:</strong></span>
                            <span>${vehicle.brandstof_omschrijving || 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Bouwjaar:</strong></span>
                            <span>${vehicle.datum_eerste_toelating ? vehicle.datum_eerste_toelating.substring(0, 4) : 'Onbekend'}</span>
                        </div>
                        <div class="result-item">
                            <span><strong>Carrosserie:</strong></span>
                            <span>${vehicle.carrosserie_omschrijving || 'Onbekend'}</span>
                        </div>
                    </div>
                    
                    <details style="margin-top: 2rem;">
                        <summary style="cursor: pointer; color: #E10600; margin-bottom: 1rem;">Toon volledige JSON data</summary>
                        <pre style="background-color: #0B0B0B; padding: 1rem; border-radius: 5px; overflow-x: auto; font-size: 0.8rem;">${JSON.stringify(vehicle, null, 2)}</pre>
                    </details>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div style="text-align: center; color: #E10600;">
                        <h3>Fout bij opzoeken</h3>
                        <p>Er is een fout opgetreden bij het opzoeken van het kenteken. Probeer het later opnieuw.</p>
                        <p style="font-size: 0.9rem; color: #B0B0B0;">Foutmelding: ${error.message}</p>
                    </div>
                `;
            }
        }

        // Show page
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageName).classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadCars();
            
            // License plate input formatting
            document.getElementById('license-input').addEventListener('input', function(e) {
                let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
                if (value.length > 2) value = value.substring(0, 2) + '-' + value.substring(2);
                if (value.length > 5) value = value.substring(0, 5) + '-' + value.substring(5);
                if (value.length > 8) value = value.substring(0, 8);
                e.target.value = value;
            });

            // Enter key for license lookup
            document.getElementById('license-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    lookupLicense();
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9904318da3c40e39',t:'MTc2MDc1MDIyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
